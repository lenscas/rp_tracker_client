<!--this file contains the starting logic of the application. 
From here everything gets loaded and if needed executed.
It also contains the container for each page
-->
<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		<!-- jquery -->
		<script
		  src="https://code.jquery.com/jquery-3.2.1.min.js"
		  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
		  crossorigin="anonymous">
		</script>
		<!--stylesheet bootstrap -->
		<link
			rel="stylesheet" 
			href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" 
			integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" 
			crossorigin="anonymous">
		<!--script bootstrap -->
		<script 
			src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" 
			integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" 
			crossorigin="anonymous">
		</script>
		<!-- css datatables -->
		<link 
			rel="stylesheet"
			href="https://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css"
		>
		<!-- script datatables -->
		<script 
			src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"
		>
		<!--script col-reorder -->
		<script 
			src="https://cdn.datatables.net/colreorder/1.3.3/js/dataTables.colReorder.min.js"
		></script>
		<!--css col-reorder -->
		<link
			rel="stylesheet"
			href="https://cdn.datatables.net/colreorder/1.3.3/css/colReorder.dataTables.min.css"
		>
		<!-- load the config for the client -->
		<script src="/tracker_client/js/config.js"></script>
		<link rel="stylesheet" href="/tracker_client/css/simpleSidebar.css">
		<script>
			//adds the other scripts that are needed.
			(function(){
				let el = $("head");
				
				function loadCss(url){
					$('<link rel="stylesheet">')
						.attr("href",conf.css+url+".css")
						.appendTo(el);
					return loadCss
				}
				
				loadCss("simpleSidebar")("index")("global");
			})()
		</script>
	</head>
	<body>
		<nav id="navHeader" class="navbar navbar-default">
			<div class="container-fluid">
			<!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header">
					<button 
						type="button" 
						class="navbar-toggle collapsed" 
						data-toggle="collapse" 
						data-target="#headerNavBar" 
						aria-expanded="false"
					>
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand">Brand</a>
					<ul class="nav navbar-nav" style="">
						<li>
							<a href="#">Profile</a>
						</li>
					</ul>
					<!--
					<button type="button" class="btn btn-default collapsed" id="menu-toggle">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
				-->
				</div>
			</div>
		</nav>
		<div id="wrapper" class="toggled">
			<div id="sidebar-wrapper" class="bg-info">
				<ul class="sidebar-nav " id="sidebarNav">
					<li>
						<a class="newPage" href="rp">Overview</a>
					</li>
					<li>
						<h2 id="menuRPName"></h2>
					</li>
					<li>
						<a class="menuItem" href="characters">Characters</a>
					</li>
					<li>
						<a class="menuItem" href="battles">Battles</a>
					</li>
					<li>
						<a class="menuItem" href="#">Events?</a>
					</li>
					<li>
						<a class="menuItem" href="#">No idea what more to put</a>
					</li>
					<li>
						<a class="menuItem" href="#">About</a>
					</li>
					<li>
						<a class="menuItem" href="#">Services</a>
					</li>
					<li>
						<a class="menuItem" href="#">Contact</a>
					</li>
				</ul>
			</div>
			<div id="page-content-wrapper">
				<div class="col-md-12">
					<div class="row">
						<div id="alert-holder">
							<div class="alert alert-danger">
								Some show case error
							</div>
						</div>
					</div>
					<div class="row">
						<div id="pageHolder">
							
						</div>
					</div>
				</div>
			</div>
		</div>
		<script>
			(function(){
				let toLoad =[
					"routes",
					"pageHandler",
					"alertManager",
					"api",
					"htmlGenerator",
					"menuManager"
				];
				let loaded=0;
				function checkDone(){
					loaded++;
					if(loaded===toLoad.length){
						//after the app is loaded for the first time we want to know what page to load
						pageHandler.goTo(window.location.href,false)
					}
				}
				toLoad.forEach(value=>{
					$.getScript(conf.js+value+".js",()=>checkDone())
				})
				//if the user clicks on a link with the class newPage
				//instead of having the user follow said link we want to load the page in ourself
				$("body").on("click","a.newPage",function(event){
					event.preventDefault()
					let newUrl = $(this).attr("href")
					pageHandler.goTo(newUrl)
				})
			})()
		</script>
		<script>
			$("#menu-toggle").click(event => {
				event.preventDefault();
				$("#wrapper").toggleClass("toggled");
			});
		</script>
	</body>
</html>
